<!DOCTYPE html>
<html>
<head>
	<title>Drag and Drop Picture Game</title>
	<style>
		#game {
			width: 800px;
			height: 600px;
			margin: 0 auto;
			background-image: url("./img/pexels-brett-sayles-5326743.jpg");
			position: relative;
		}
		.draggable {
			width: 100px;
			height: 100px;
			position: relative;
		}
		.pics {
			height: 100px;
			border: 1px solid;
		}
	</style>
</head>
<body>


	<div id="game">
		<!-- <img class="draggable" src="https://i.imgur.com/T6PvU6J.png" draggable="true" id="bird">
		<img class="draggable" src="https://i.imgur.com/hNXBzgN.png" draggable="true" id="fish"> -->
	</div>
	<div class="pics">
		<img class="draggable" src="./img/cat.png" draggable="false" id="cat">
		<img class="draggable" src="./img/dog.png" draggable="false" id="dog">
	</div>

<script>
	var count = 1;

	var dog = document.getElementById("dog");
	var cat = document.getElementById("cat");
	var bird = document.getElementById("bird");
	var fish = document.getElementById("fish");
	var game = document.getElementById("game");

	dog.addEventListener("click", clone);
	cat.addEventListener("click", clone);
	// dog.addEventListener("dragstart", startDrag);
	// cat.addEventListener("dragstart", startDrag);
	// bird.addEventListener("dragstart", startDrag);
	// fish.addEventListener("dragstart", startDrag);
	
	function startDrag(e) {
		e.dataTransfer.setData("text", e.target.id);
	}
	
	game.addEventListener("dragover", allowDrop);
	game.addEventListener("drop", drop);
	
	function clone(e) {
		var clone = document.createElement('img');
		clone.draggable = "true";
		clone.src = e.target.src;
		clone.className = "draggable";
		clone.id = e.target.id + count;
		clone.addEventListener("dragstart", startDrag);
		count++;
		game.appendChild(clone);
		

	}

	function allowDrop(e) {
		console.log(e.target.id + " allowDrop")
		e.preventDefault();
	}
	
	function drop(e) {
		e.preventDefault();
		var data = e.dataTransfer.getData("text");
		console.log('drop: ' + data)
		img = document.getElementById(data)
		img.style.position = "absolute";
      	img.style.left = e.clientX - img.width/2 - game.getBoundingClientRect().left + "px";
      	img.style.top = e.clientY - img.height/2 - game.getBoundingClientRect().top + "px";
		if (e.target.nodeName !== "IMG"){ 
			e.target.appendChild(document.getElementById(data));
		}
	}
</script>
</body>
</html>